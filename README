To run the CSE demo, you must:

1) Install these tools:
-- MongoDB 2.0.1
-- PHP 5.3
-- A local copy of the X.commerce Fabric

2) Enable these PHP extensions in PHP.ini:
-- extension=php_gmp.dll
-- extension=php_mongo.dll

3) Copy the cse_demo directory obtained from github.com to your web server’s document root directory.

4) Obtain an API key for the Google product search API from this URL:
-- http://code.google.com/apis/shopping/search/v1/getting_started.html

5) Add this key to the file offer_pub_capability_tx.php where indicated by the comment <-- YOUR GOOGLE PRODUCT SEARCH API KEY HERE"

6) In the file offer_pub_capability_tx.php:
-- a) Comment out this line:  curl_setopt($ch, CURLOPT_URL, "https://api.sandbox.x.com/fabric/experimental/cse/offer/create"); // sandbox Fabric
-- b) Add this line in its place: curl_setopt($ch, CURLOPT_URL, "https://localhost:8080/cse/offer/create"); // local fabric

7) Open the file .htaccess
-- Make sure that the RewriteBase path matches your setup.
-- If things don’t work, an incorrect path here is often the reason

8) Run an instance of MongoDB.

9) Run the Fabric locally.

10) Run the XManager UI program (https://localhost:8079)
-- a) Create an capability named Offer Pub and set its endpoint to http://127.0.0.1/path_to_offer_pub_capability_rx.php
-- b) Add merchant 2 to the Offer Pub capability
-- c) Insert the generated bearer token for merchant 2 in the file offer_pub_capability_tx.php where indicated 
by the comment // INSERT YOUR TENANT BEARER TOKEN BELOW
-- d) Create a capability named CSE and set its endpoint to http://127.0.0.1/path_to_cse_capability.php 
(probably same path as for offer_pub_capbility_rx above)
-- e) Add merchant 2 to the CSE capability
-- f) Insert the generated bearer token for merchant 2 in the file cse_capability.phph where indicated
by the comment // INSERT YOUR TENANT BEARER TOKEN BELOW

11) From the command line, run this command: tail -f installdir/cse_demo/cse.log 
-- The CSE capability writes to this log when it receives a message on topic /cse/offer/create and when it sends a message on topic/cse/offer/created. 
-- The tail command lets you see these writes as they happen, thereby showing you that the CSE capability is working.

12) From the command line, run this command: tail -f installdir/cse_demo/offer_pub.log 
-- The Offer Publisher capability writes to this log when it receives a message on /cse/offer/created
-- The tail command lets you see these writes as they happen, thereby showing you that the Offer Publisher capability is working.

13) Start your web server

14) From the command line, run this command: php -f installdir/cse_demo/offer_pub_capability_tx.php
-- If everything is set up correctly, you should see entries written to the log files cse.log and then offer_pub.log
